<!DOCTYPE html>    
<html lang="ar" dir="rtl">    
<head>    
<meta charset="utf-8">    
<meta name="viewport" content="width=device-width, initial-scale=1.0">    
<title>Calori Track - ุญุงุณุจุฉ ุงูุณุนุฑุงุช ูุชุชุจุน ุงููุฌุจุงุช</title>    
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">    
<style>  
/* === 1. ูุชุบูุฑุงุช CSS ูุงููุถุน ุงูุฏุงูู/ุงููุงุชุญ === */
:root{  
  --bg-light:#f0f2f5; --card-light:#fff; --text-light:#1f2937;  
  --bg-dark:#1e1e1e; --card-dark:#2c2c2c; --text-dark:#e5e7eb;  
  --accent:#007bff; --accent-hover:#0056b3; --shadow-light:0 10px 30px rgba(0,0,0,0.08),0 0 0 1px rgba(0,0,0,0.05);  
  --shadow-dark:0 10px 30px rgba(0,0,0,0.5); --success:#10b981; --warning:#f59e0b; --danger:#ef4444;  
}  
body{
    margin:0;font-family:'Cairo',sans-serif;background:var(--bg-light);color:var(--text-light);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:20px 10px;
    transition: background 0.4s,color 0.4s;
    direction: rtl; 
    text-align: right;
}
body.dark{background:var(--bg-dark);color:var(--text-dark);}

.container{
    max-width:95%;width:100%;margin:auto;background:var(--card-light);border-radius:20px;padding:30px;box-shadow:var(--shadow-light);
    transition: all 0.4s ease-in-out, opacity 0.4s; 
    box-sizing: border-box; 
    opacity: 1; 
}
body.dark .container{background:var(--card-dark);box-shadow:var(--shadow-dark);}

/* === 2. ุฃููุงุท ุนุงูุฉ ูููุงุฌูุฉ (ุงูุนููุงูุ ุงูุฅุฏุฎุงูุ ุงูุฃุฒุฑุงุฑ) === */
h1{
    font-size:32px;font-weight:900;text-align:center;color:var(--accent);margin-bottom:30px;padding-bottom:10px;border-bottom:3px solid var(--accent);
    display:block;width:100%;margin-left: 0;margin-right: 0;
}
h2 {
    color: var(--text-light);
    margin-top: 30px;
    margin-bottom: 15px;
    font-weight: 700;
    font-size: 24px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
}
body.dark h2 { color: var(--text-dark); }

label{display:block;margin-top:15px;margin-bottom:5px;font-size:15px;font-weight:600;color:inherit;}
input[type="text"], input[type="number"],select{
    width:100%;padding:14px 18px;border-radius:12px;border:1px solid #ccc;background:var(--bg-light);color:var(--text-light);font-size:16px;transition: all 0.3s;appearance:none;
    direction: rtl;text-align: right;box-sizing: border-box;
}
body.dark input[type="text"],body.dark input[type="number"],body.dark select{background:#333;border-color:#555;color:var(--text-dark);}
input[type="text"]:focus, input[type="number"]:focus,select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,123,255,0.3);}
.btn, .action-btn, .toggle-btn,.start-btn{
    padding:14px 25px;border:none;border-radius:12px;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;font-size:17px;transition: all 0.3s;width:100%;margin-top:25px;
}
.btn:hover,.start-btn:hover, .action-btn:hover{background:var(--accent-hover);transform:translateY(-2px);}

/* ุฒุฑ ุชุชุจุน ุงููุฌุจุงุช */
#goToTrackerBtn {
    background-color: var(--success);
    margin-top: 15px;
}
#goToTrackerBtn:hover {
    background-color: #0b9e6e;
}

/* === 3. ุฃููุงุท ุญุงุณุจุฉ ุงูุณุนุฑุงุช (Cal Track) === */
.row {
    display: flex;
    gap: 20px;
    width: 100%;
    margin-top: 20px;
}
.row > div {
    flex: 1 1 50%;
    max-width: none; 
    box-sizing: border-box;
}
.results{margin-top:30px;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;}
.result-item{padding:20px;border-radius:16px;background:var(--bg-light);box-shadow:0 4px 10px rgba(0,0,0,0.08);text-align:center;transition:all 0.3s;}
body.dark .result-item{background:#3c3c3c;box-shadow:0 4px 10px rgba(0,0,0,0.3);}
.big{font-size:28px;font-weight:900;color:var(--accent);}
.small{font-size:14px;color:#6b7280;margin-bottom:5px;font-weight:600;}
body.dark .small{color:#a0a0a0;}
.macro-grid{grid-column:span full;text-align:right;display:flex;flex-direction:column;gap:10px;padding:20px;}
.macro-bar{height:10px;border-radius:999px;background:#e0e0e0;overflow:hidden;margin-top:3px;width:100%;}
body.dark .macro-bar{background:#333;}
.macro-fill{height:100%;transform-origin:right;transform:scaleX(0);transition:transform 0.8s cubic-bezier(0.25,0.46,0.45,0.94);}

/* ุฃููุงุท ุดุงุดุฉ ุงูุจุฏุงูุฉ */
.landing-container{
    max-width:550px;
    padding:40px;
    text-align:center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    flex-grow: 1;
    box-sizing: border-box;
}
.logo-title{font-size:42px;font-weight:900;color:var(--accent);margin-bottom:10px;display:flex;align-items:center;justify-content:center;}
.logo-icon{font-size:48px;margin-left:15px;color:var(--accent);}
.subtitle{font-size:19px;color:var(--text-light);margin-bottom:40px;font-weight:600;}
body.dark .subtitle{color:var(--text-dark);}
.features-list{list-style:none;padding:0;margin:0 0 50px 0;text-align:right;}
.feature-item{display:flex;align-items:center;margin-bottom:15px;font-size:17px;font-weight:500;justify-content:flex-end;}
.feature-icon{color:var(--success);font-size:24px;margin-right:10px;}
.start-btn{min-width:300px;font-size:18px;margin-top:10px;}

/* ุฒุฑ ุชุจุฏูู ุงููุถุน (Fixed) */
.toggle-btn{
    position:fixed; 
    top:20px;
    right:20px;
    width:auto;
    padding:10px 15px;
    margin:0;
    font-size:14px;
    z-index: 1000;
}
footer{text-align:center;margin-top:20px;padding:10px 0;font-size:13px;color:#9ca3af;}
body.dark footer{color:#6b7280;}

/* === 4. ุฃููุงุท ุชุชุจุน ุงููุฌุจุงุช (Nutri Track) === */
.input-group {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    align-items: flex-end;
    flex-wrap: wrap; 
}

.form-control {
    flex: 1 1 200px; 
}
#addMealBtn {
    background-color: var(--success); 
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: background-color 0.3s, transform 0.1s;
    white-space: nowrap;
    height: 44px; 
    margin-top: 0;
}
#addMealBtn:hover {
    background-color: #0b9e6e;
    transform: translateY(-1px); 
}

/* ุฒุฑ ุชุตููุฑ ุงููุฌุจุงุช (Reset Button Style) */
.reset-meals-btn {
    background-color: var(--danger); 
    margin-top: 15px; 
    padding: 14px 25px; 
    font-size: 17px;
    width: 100%;
    margin-bottom: 25px; 
}
.reset-meals-btn:hover {
    background-color: #c82333;
}


#mealList {
    list-style: none;
    padding: 0;
    margin-top: 20px;
}
#mealList li {
    background-color: var(--card-light); 
    padding: 20px 25px; 
    margin-bottom: 15px; 
    border-radius: 15px; 
    box-shadow: var(--shadow-light); 
    border-right: 6px solid var(--accent); 
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px; 
    flex-wrap: wrap;
    transition: all 0.3s ease-in-out;
    cursor: default; 
}
#mealList li:hover {
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
    transform: translateY(-3px);
}
body.dark #mealList li { 
    background-color: var(--card-dark); 
    box-shadow: var(--shadow-dark); 
    border-right: 6px solid var(--accent); 
}

.meal-details {
    font-weight: 800; 
    color: var(--text-light);
    font-size: 18px;
    flex-basis: auto; 
    flex-grow: 1; 
    min-width: 150px;
}
body.dark .meal-details { color: var(--text-dark); }

.macros-list {
    flex-basis: auto; 
    font-size: 15px;
    color: #6c757d;
    display: flex; 
    gap: 15px; 
    flex-wrap: wrap;
    flex-grow: 2; 
    justify-content: flex-end; 
}
body.dark .macros-list { color: #a0a0a0; }
.macros-list strong {
    color: var(--text-light); 
    font-size: 16px;
    display: inline-block;
    min-width: 40px; 
}
body.dark .macros-list strong { color: var(--text-dark); }

.delete-btn {
    background-color: var(--danger); 
    color: white;
    border: none;
    padding: 10px 18px; 
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    transition: background-color 0.3s, transform 0.1s;
    white-space: nowrap; 
}
.delete-btn:hover {
    background-color: #c82333; 
    transform: translateY(-1px);
}

.totals-summary {
    margin-top: 40px;
    padding: 25px;
    background-color: var(--bg-light); 
    border-radius: 12px;
    text-align: center;
}
body.dark .totals-summary { background-color: #3c3c3c; }

/* ุดุจูุฉ ุงูู Target/Remaining */
.totals-grid {
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
    gap: 10px; 
}

.total-item {
    padding: 15px;
    background-color: var(--card-light);
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    transition: all 0.3s;
    border-top: 4px solid; 
}
body.dark .total-item { background-color: var(--card-dark); }

.total-item p {
    margin: 0;
    font-size: 13px; 
    font-weight: 600;
    color: #6c757d;
}
body.dark .total-item p { color: #a0a0a0; }

.total-item span {
    display: block;
    font-size: 28px; 
    font-family: 'Cairo', sans-serif;
    font-weight: 700;
    margin-top: 5px;
}
.total-item span strong {
    font-weight: 900;
}

/* ุฃููุงู ุงููุงูุฑูุฒ ุงูููุงุฆูุฉ */
#totalCalories { border-color: var(--warning); }
#totalCalories span { color: var(--warning); }
#totalProtein { border-color: var(--success); } 
#totalProtein span { color: var(--success); }
#totalCarbs { border-color: var(--accent); } 
#totalCarbs span { color: var(--accent); }
#totalFat { border-color: var(--danger); } 
#totalFat span { color: var(--danger); }

/* ูุฆุฉ ูุชุทุจูู ุชูุงุดู ุงูุฎุฑูุฌ */
.screen-out {
    opacity: 0;
    transition: opacity 0.4s ease-out;
    pointer-events: none;
}

/* ุฃููุงุท ุงูููุงุตู ุงููุฒุฎุฑูุฉ */
.decorative-divider {
    height: 1px;
    margin: 30px 0;
    background: linear-gradient(to right, 
        transparent, 
        var(--text-light) 10%, 
        var(--text-light) 90%, 
        transparent
    );
    border: none;
    opacity: 0.3; 
    transition: all 0.4s;
    width: 100%;
}
body.dark .decorative-divider {
    background: linear-gradient(to right, 
        transparent, 
        var(--text-dark) 10%, 
        var(--text-dark) 90%, 
        transparent
    );
    opacity: 0.2;
}


/* === 5. ุงูุชุฌุงูุจ (Media Queries) === */
@media (max-width:768px){
    .container { margin: 15px; padding: 20px; }
    form{display: block;}
    .row{
        flex-direction:column;
        gap: 0;
        margin-top: 0;
    }
    .row > div {
        margin-top: 15px;
        max-width: 100%;
    }
    .results{grid-template-columns:1fr;}.macro-grid{grid-column:span 1;}
    .input-group { flex-direction: column; align-items: stretch; }
    .form-control { flex: 1 1 100%; }
    #addMealBtn { width: 100%; margin-top: 10px; height: auto; }
    
    /* ุชุนุฏูู ุดุจูุฉ ุงูุชูุชุงู ูู ุงูุฌูุงู */
    .totals-grid { 
        grid-template-columns: 1fr 1fr; 
        gap: 10px; 
    }
    .total-item { flex: 1 1 100%; }
    
    #mealList li { 
        flex-direction: column; 
        align-items: flex-start; 
        gap: 10px; 
    }
    .meal-details { 
        flex-basis: 100%; 
        min-width: auto;
    }
    .macros-list {
        flex-basis: 100%;
        justify-content: flex-start; 
        gap: 10px;
    }
    .delete-btn { 
        flex-basis: 100%; 
        margin-top: 10px;
    }
}
.hidden{display:none !important;}
</style>
</head>    
<body>    
<button class="toggle-btn" onclick="toggleMode()"><i class="fas fa-moon"></i> ุชุจุฏูู ุงููุถุน</button>

<div id="landingScreen" class="container landing-container">    
  <div class="logo-title">    
    <span class="logo-icon"><i class="fas fa-dumbbell"></i></span> Calori Track    
  </div>    
  <div class="subtitle">ุงูุฎูุงุฑุฒููุฉ ุงูุฃูุซุฑ ุฏูุฉ ูุชุญุฏูุฏ ุงุญุชูุงุฌู ูู ุงูุณุนุฑุงุช ูุงููุงูุฑูุฒ ูู ููุงู ุงูุฃุฌุณุงู.</div>    
  <ul class="features-list">    
    <li class="feature-item">ุญุณุงุจ ูุนุฏู ูุชูุฉ ุงูุฌุณู (BMI) ูุงุฌูุงูู ุงูุณุนุฑุงุช (TDEE)<span class="feature-icon"><i class="fas fa-check-circle"></i></span></li>    
    <li class="feature-item">ุชูุฒูุน ุฏููู ููุจุฑูุชูู ูุงููุฑุจูููุฏุฑุงุช ูุงูุฏููู ุญุณุจ ุงููุฏู.<span class="feature-icon"><i class="fas fa-check-circle"></i></span></li>    
    <li class="feature-item">ุญุณุงุจ ุงูููู ุงูุบุฐุงุฆูุฉ ุฏุงุฎู ุงูุฃุทุนูุฉ.<span class="feature-icon"><i class="fas fa-check-circle"></i></span></li>    
        <li class="feature-item">Developed By Mohamed Abd El-Aziz<span class="feature-icon"><i class="fas fa-check-circle"></i></span></li>    
  </ul>    
  <button class="start-btn" onclick="showScreen('calculatorScreen')"><i class="fas fa-calculator"></i> Calculate Now</button>    
</div>

<div id="calculatorScreen" class="container hidden" style="max-width:700px;">    
  <h1>- Calories & Macros -</h1>    
  <form id="calcForm" onsubmit="event.preventDefault(); calculate();">    
    <div class="row">    
      <div><label for="weight"><i class="fas fa-weight-hanging"></i> ุงููุฒู (ูุฌู)</label><input type="number" id="weight" min="0" step="0.1" required /></div>    
      <div><label for="height"><i class="fas fa-ruler-vertical"></i> ุงูุทูู (ุณู)</label><input type="number" id="height" min="0" step="0.1" required /></div>    
    </div>    
    <div class="row">    
      <div><label for="age"><i class="fas fa-birthday-cake"></i> ุงูุนูุฑ (ุณูุฉ)</label><input type="number" id="age" min="0" required /></div>    
      <div><label for="gender"><i class="fas fa-venus-mars"></i> ุงูุฌูุณ</label>    
        <select id="gender"><option value="male">ุฐูุฑ</option><option value="female">ุฃูุซู</option></select>    
      </div>    
    </div>    
    <label for="activity"><i class="fas fa-running"></i> ูุณุชูู ุงููุดุงุท</label>    
    <select id="activity">    
        <option value="1.2">ุฎุงูู (ุจุฏูู ุชูุฑูู)</option>    
        <option value="1.375">ูุดุงุท ุฎููู (1-3 ุฃูุงู)</option>    
        <option value="1.55">ูุดุงุท ูุชูุณุท (3-5 ุฃูุงู)</option>    
        <option value="1.725">ูุดุงุท ุนุงูู (6-7 ุฃูุงู)</option>    
        <option value="1.9">ูุดุงุท ุนููู / ุนูู ุดุงู</option>    
    </select>    
    <label for="goal"><i class="fas fa-bullseye"></i> ุงููุฏู</label>    
    <select id="goal">    
        <option value="maintain">ุซุจุงุช ุงููุฒู</option>    
        <option value="mild_loss">ุฎุณุงุฑุฉ ุจุณูุทุฉ (~0.25 ูุฌู/ุฃุณุจูุน)</option>    
        <option value="moderate_loss">ุฎุณุงุฑุฉ ูุชูุณุทุฉ (~0.5 ูุฌู/ุฃุณุจูุน)</option>    
        <option value="aggressive_loss">ุฎุณุงุฑุฉ ูููุฉ (~1 ูุฌู/ุฃุณุจูุน)</option>    
        <option value="mild_gain">ุฒูุงุฏุฉ ุจุณูุทุฉ (~0.25 ูุฌู/ุฃุณุจูุน)</option>    
        <option value="moderate_gain">ุฒูุงุฏุฉ ูุชูุณุทุฉ (~0.5 ูุฌู/ุฃุณุจูุน)</option>    
    </select>    
    <label for="bodyType"><i class="fas fa-user-check"></i> ููุน ุงูุฌุณู</label>    
    <select id="bodyType"><option value="normal">ุนุงุฏู</option><option value="athlete">ุฑูุงุถู / ููุงู ุฃุฌุณุงู</option></select>    
    <label for="bodyFat"><i class="fas fa-percent"></i> ูุณุจุฉ ุงูุฏููู ูู ุงูุฌุณู % โ ุงุฎุชูุงุฑู</label>    
    <input type="number" id="bodyFat" min="3" max="60" step="0.1" placeholder="ุงุฎุชูุงุฑู" />    
    <button class="btn" type="submit"><i class="fas fa-chart-line"></i> ุงุญุณุจ ุงููุชุงุฆุฌ ุงูุขู</button>    
    
    <button class="btn" id="goToTrackerBtn" type="button" onclick="showScreen('nutriTrackerScreen')"><i class="fas fa-utensils"></i> ุชุชุจุน ูุฌุจุงุชู</button>
  </form>      
  
  <div class="results">    
    <div class="result-item" style="background-color: var(--warning); color:#fff;">    
      <div class="small" style="color:#fff;">ุงูุณุนุฑุงุช ุงููุณุชูุฏูุฉ</div>    
      <div id="targetCal" class="big" style="color:#fff;">0</div>    
    </div>    
    <div class="result-item">    
      <div class="small">ุงูุณุนุฑุงุช ุงูููููุฉ (TDEE)</div>    
      <div id="tdee" class="big">0</div>    
    </div>    
    <div class="result-item">    
      <div class="small">ูุคุดุฑ ูุชูุฉ ุงูุฌุณู (BMI)</div>    
      <div id="bmi" class="big">0</div>    
      <div id="bmiText" class="small">โ</div>    
    </div>    
    <div class="result-item macro-grid" style="grid-column:1 / -1;">    
      <div class="small" style="font-size:16px;">ุชูุฒูุน ุงููุงูุฑูุฒ</div>    
      <div id="macrosSummary" class="big" style="font-size:20px;color:var(--text-light);border-bottom:1px solid #ddd;padding-bottom:10px;">โ</div>    
      <div><div class="small">ุจุฑูุชูู (<span id="proteinPct">0</span>%) โ <strong id="proteinGr">0</strong> ุฌู</div><div class="macro-bar"><div id="protBar" class="macro-fill" style="background:var(--accent);"></div></div></div>    
      <div><div class="small">ูุฑุจูููุฏุฑุงุช (<span id="carbPct">0</span>%) โ <strong id="carbGr">0</strong> ุฌู</div><div class="macro-bar"><div id="carbBar" class="macro-fill" style="background:var(--success);"></div></div></div>    
      <div><div class="small">ุงูุฏููู (<span id="fatPct">0</span>%) โ <strong id="fatGr">0</strong> ุฌู</div><div class="macro-bar"><div id="fatBar" class="macro-fill" style="background:var(--danger);"></div></div></div>    
    </div>    
  </div>    
</div>    

<div id="nutriTrackerScreen" class="container hidden">
    <h1><i class="fas fa-utensils"></i> Nutri Track</h1>

    <div class="input-group">
        <div class="form-control">
            <label for="searchInput">ุจุญุซ ุนู ุทุนุงู:</label>
            <input type="text" id="searchInput" placeholder="">
        </div>
        
        <div class="form-control">
            <label for="foodSelect">ุงุฎุชุฑ ุงูุทุนุงู:</label>
            <select id="foodSelect">
                <option value="">ุงุฎุชุฑ ุทุนุงูุงู</option>
            </select>
        </div>
        
        <div class="form-control">
            <label for="foodAmount">ุงููููุฉ (ุฌุฑุงู):</label>
            <input type="number" id="foodAmount" min="1" value="100">
        </div>

        <button id="addMealBtn" class="action-btn" type="button" onclick="handleAddMeal()"><i class="fas fa-plus-circle"></i> ุฅุถุงูุฉ ูุฌุจุฉ</button>
    </div>

    <button class="action-btn reset-meals-btn" type="button" onclick="clearAllMeals()"><i class="fas fa-trash-alt"></i> ุชุตููุฑ ุฌููุน ุงููุฌุจุงุช</button>
    
    <div class="decorative-divider"></div>

    <h2>ูุงุฆูุฉ ุงููุฌุจุงุช ุงููุถุงูุฉ</h2>
    <ul id="mealList">
        </ul>
    
    <div class="decorative-divider"></div>

    <div class="totals-summary">
        <h2>ุงูุฅุฌูุงูู ุงููููู ููุนูุงุตุฑ ุงูุบุฐุงุฆูุฉ</h2>
        <div class="totals-grid">
            <div class="total-item" id="totalCalories">
                <p>ุงููุณุชููู (ูุงููุฑู)</p>
                <span>0.0</span>
            </div>
            <div class="total-item" style="border-color: var(--warning);">
                <p>ุงููุฏู / ุงููุชุจูู</p>
                <span style="font-size:24px;">
                    <strong id="targetSummaryCal">0</strong> / <strong id="remainingSummaryCal" style="color:var(--warning);">0</strong>
                </span>
            </div>

            <div class="total-item" id="totalProtein">
                <p>ุงููุณุชููู (ุจุฑูุชูู)</p>
                <span>0.0</span>
            </div>
            <div class="total-item" style="border-color: var(--success);">
                <p>ุงููุฏู / ุงููุชุจูู</p>
                <span style="font-size:24px;">
                    <strong id="targetSummaryProtein">0</strong> / <strong id="remainingSummaryProtein" style="color:var(--success);">0</strong>
                </span>
            </div>

            <div class="total-item" id="totalCarbs">
                <p>ุงููุณุชููู (ูุฑุจูููุฏุฑุงุช)</p>
                <span>0.0</span>
            </div>
            <div class="total-item" style="border-color: var(--accent);">
                <p>ุงููุฏู / ุงููุชุจูู</p>
                <span style="font-size:24px;">
                    <strong id="targetSummaryCarbs">0</strong> / <strong id="remainingSummaryCarbs" style="color:var(--accent);">0</strong>
                </span>
            </div>

            <div class="total-item" id="totalFat">
                <p>ุงููุณุชููู (ุฏููู)</p>
                <span>0.0</span>
            </div>
            <div class="total-item" style="border-color: var(--danger);">
                <p>ุงููุฏู / ุงููุชุจูู</p>
                <span style="font-size:24px;">
                    <strong id="targetSummaryFat">0</strong> / <strong id="remainingSummaryFat" style="color:var(--danger);">0</strong>
                </span>
            </div>
        </div>
    </div>
</div>


<footer>By / Cap Mohamed Abd-El Aziz</footer>    

<script>    
// =================================================================
// ๐ฅ ุงููุชุบูุฑุงุช ุงูุนุงูุฉ (Global Variables) 
// =================================================================
let foodSelect, searchInput, foodAmount, addMealBtn, mealList, totalCalories, totalProtein, totalCarbs, totalFat;

let targetMacros = {
    targetCal: 0,
    proteinGr: 0,
    carbGr: 0,
    fatGr: 0,
};
const STORAGE_KEY = 'caloriTrackData';
let userMeals = []; 

// =================================================================
// ุฏุงูุฉ ุงูุชุญูู ูู ุงูุดุงุดุงุช (ูุนุฏูุฉ ููุงูุชูุงู ูุงูุชูุฑูุฑ ูุฅุนุงุฏุฉ ุชุนููู ุงูุฃูุฏุงู)
// =================================================================

function initNutriTrackerElements() {
    foodSelect = document.getElementById('foodSelect');
    searchInput = document.getElementById('searchInput');
    foodAmount = document.getElementById('foodAmount');
    addMealBtn = document.getElementById('addMealBtn');
    mealList = document.getElementById('mealList');
    
    // ุฑุจุท ุนูุงุตุฑ ุงูููุฎุต
    totalCalories = document.getElementById('totalCalories').querySelector('span');
    totalProtein = document.getElementById('totalProtein').querySelector('span');
    totalCarbs = document.getElementById('totalCarbs').querySelector('span');
    totalFat = document.getElementById('totalFat').querySelector('span');
    
    setupListeners(); 
}

function showScreen(screenId) {
    const screens = ['landingScreen', 'calculatorScreen', 'nutriTrackerScreen'];
    const currentScreenId = screens.find(id => !document.getElementById(id).classList.contains('hidden'));
    const currentScreen = document.getElementById(currentScreenId);
    const newScreen = document.getElementById(screenId);

    window.scrollTo(0, 0); 
    
    // ููุทู ุฅุนุงุฏุฉ ุชุนููู ุงูุฃูุฏุงู ุนูุฏ ุงูุงูุชูุงู ุฅูู ุดุงุดุฉ ุงูุชุชุจุน
    if (screenId === 'nutriTrackerScreen') {
        
        if (!totalCalories) initNutriTrackerElements();

        // ุฅุฐุง ูู ูุชู ุชุญุฏูุซ ุงูุฃูุฏุงู ููุชู (ูู ุดุงุดุฉ ุงูุญุงุณุจุฉ) ุฃู ุงููุฏู ุงูุญุงูู ุตูุฑ
        if (currentScreenId !== 'calculatorScreen' || targetMacros.targetCal === 0) {
            targetMacros = {
                targetCal: 0,
                proteinGr: 0,
                carbGr: 0,
                fatGr: 0,
            };
            // ุญูุธ ุงูุฃูุฏุงู ุงูุตูุฑูุฉ ูุชุฌูุจ ุชุญููู ุฃูุฏุงู ูุฏููุฉ ูู localStorage ูุง ุชุชุทุงุจู ูุน ุงููุฏุฎูุงุช ุงูุฌุฏูุฏุฉ
            saveDataToLocalStorage(); 
        }
    }


    if (currentScreen && currentScreen !== newScreen) {
        currentScreen.classList.add('screen-out');

        setTimeout(() => {
            currentScreen.classList.remove('screen-out');
            currentScreen.classList.add('hidden');

            newScreen.classList.remove('hidden');

            // ุชููุฆุฉ ุดุงุดุฉ ุงูุชุชุจุน ุฅุฐุง ูุฒู ุงูุฃูุฑ
            if (screenId === 'nutriTrackerScreen') {
                initNutriTrackerElements(); 
                loadFoodOptions(foodData);  
                updateTotals();             
            }
        }, 400); 
    } else {
        // ุฅุฐุง ูู ุชูู ููุงู ุดุงุดุฉ ุณุงุจูุฉ (ุฃูู ุชุญููู)ุ ุฃุธูุฑ ุงูุดุงุดุฉ ุงูุฌุฏูุฏุฉ ูุจุงุดุฑุฉ
        screens.forEach(id => document.getElementById(id).classList.add('hidden'));
        newScreen.classList.remove('hidden');
        
        if (screenId === 'nutriTrackerScreen') {
            initNutriTrackerElements(); 
            loadFoodOptions(foodData);  
            updateTotals();             
        }
    }
}

// =================================================================
// ุฏุงูุฉ ุชุจุฏูู ุงููุถุน
// =================================================================
function toggleMode(){    
  document.body.classList.toggle('dark');    
  const btn = document.querySelector('.toggle-btn');    
  btn.innerHTML = document.body.classList.contains('dark') ? '<i class="fas fa-sun"></i> ุชุจุฏูู ุงููุถุน' : '<i class="fas fa-moon"></i> ุชุจุฏูู ุงููุถุน';    
}    
  
// =================================================================
// 1. ููุทู ุญุงุณุจุฉ ุงูุณุนุฑุงุช ูุงููุงูุฑูุฒ (Project 1) - ูุนุฏู ููุญูุธ
// =================================================================
function calculate(){    
  const weight = parseFloat(document.getElementById('weight').value);    
  const height = parseFloat(document.getElementById('height').value);    
  const age = parseFloat(document.getElementById('age').value);    
  const gender = document.getElementById('gender').value;    
  const activity = parseFloat(document.getElementById('activity').value);    
  const goal = document.getElementById('goal').value;    
  const bodyType = document.getElementById('bodyType').value;    
  const bodyFatInput = parseFloat(document.getElementById('bodyFat').value);    
  
  let proteinPct = 15; 
  
  if(!weight || !height || !age || !activity){alert('ูุฑุฌู ุฅุฏุฎุงู ุฌููุน ุงูุจูุงูุงุช ุงููุทููุจุฉ'); return;}    
  
  // ุตูุบุฉ Mifflin-St Jeor
  let bmr = gender==='male'? 10*weight + 6.25*height - 5*age + 5 : 10*weight + 6.25*height -5*age -161;    
  let tdee = bmr * activity;    
  
  const goals = {'maintain':1,'mild_loss':0.85,'moderate_loss':0.75,'aggressive_loss':0.65,'mild_gain':1.15,'moderate_gain':1.25};    
  let targetCal = tdee * goals[goal];    
  
  let bmi = weight / Math.pow(height/100,2);    
  let bmiText = '';  
  
  if(!isNaN(bodyFatInput)){  
    if(bodyFatInput < 10) bmiText = 'ุฏููู ููููุฉ';  
    else if(bodyFatInput < 18) bmiText = 'ุฏููู ูุชูุณุทุฉ';  
    else bmiText = 'ุฏููู ูุฑุชูุนุฉ';  
  } else {  
    if(bodyType === 'athlete'){  
      if(bmi < 18.5) bmiText='ูุญูู';  
      else if(bmi < 25) bmiText='ุฌุณู ุฑูุงุถู ุฌูุฏ';  
      else if(bmi < 30) bmiText='ุนุถูุงุช ูุซูุฑุฉ';  
      else if(bmi < 35) bmiText='ุฌุณู ุถุฎู';  
      else bmiText='ุฒูุงุฏุฉ ุฏููู';  
    } else {  
      if(bmi < 18.5) bmiText='ูุญูู';  
      else if(bmi < 25) bmiText='ุทุจูุนู';  
      else if(bmi < 30) bmiText='ูุฒู ุฒุงุฆุฏ';  
      else bmiText='ุณููุฉ';  
    }  
  }  
  
  let fatPct = 25; // ูุณุจุฉ ุงูุฏููู ุซุงุจุชุฉ 
  let proteinCal = targetCal * (proteinPct / 100);    
  let proteinGr = proteinCal / 4;    
  let fatCal = targetCal * (fatPct / 100);    
  let fatGr = fatCal / 9;    
  let carbCal = targetCal - proteinCal - fatCal;    
  let carbGr = carbCal / 4;    
  let carbPct = 100 - proteinPct - fatPct;    
  if(carbPct < 0){ carbPct = 0; carbGr = 0; carbCal = 0; }    
  
  document.getElementById('tdee').innerText = Math.round(tdee);    
  document.getElementById('targetCal').innerText = Math.round(targetCal);    
  document.getElementById('bmi').innerText = bmi.toFixed(1);    
  document.getElementById('bmiText').innerText = bmiText;    
  
  document.getElementById('proteinGr').innerText = Math.round(proteinGr);    
  document.getElementById('carbGr').innerText = Math.round(carbGr);    
  document.getElementById('fatGr').innerText = Math.round(fatGr);    
  
  document.getElementById('proteinPct').innerText = proteinPct;    
  document.getElementById('carbPct').innerText = Math.round(carbPct);    
  document.getElementById('fatPct').innerText = fatPct;    
  
  document.getElementById('protBar').style.transform=`scaleX(${proteinCal/targetCal})`;    
  document.getElementById('carbBar').style.transform=`scaleX(${carbCal/targetCal})`;    
  document.getElementById('fatBar').style.transform=`scaleX(${fatCal/targetCal})`;

  // ุญูุธ ุงููุงูุฑูุฒ ุงููุณุชูุฏูุฉ ูู ุงููุชุบูุฑ ุงูุนุงููู
  targetMacros = {
      targetCal: Math.round(targetCal),
      proteinGr: Math.round(proteinGr),
      carbGr: Math.round(carbGr),
      fatGr: Math.round(fatGr),
  };
  
  // ุญูุธ ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงููุญูู (ูุดูู ุงูุฃูุฏุงู ูุงููุฌุจุงุช)
  saveDataToLocalStorage();
  
  // ุชุญุฏูุซ ุฅุฌูุงููุงุช ุงูุชุชุจุน
  updateTotals();
}

// =================================================================
// ุฏุงูุฉ ุญูุธ ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงููุญูู (localStorage)
// =================================================================
function saveDataToLocalStorage() {
    const data = {
        target: targetMacros,
        meals: userMeals,
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

// =================================================================
// ุฏุงูุฉ ุชุญููู ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงููุญูู (localStorage)
// =================================================================
function loadDataFromLocalStorage() {
    const savedData = localStorage.getItem(STORAGE_KEY);
    if (savedData) {
        const data = JSON.parse(savedData);
        
        // ุชุญููู ุงูุฃูุฏุงู 
        if (data.target) {
            targetMacros = data.target;
            // ุนุฑุถูุง ูู ุดุงุดุฉ ุงูุญุงุณุจุฉ ูุขุฎุฑ ุฃูุฏุงู ุชู ุญุณุงุจูุง
            document.getElementById('targetCal').innerText = targetMacros.targetCal || '0';
            document.getElementById('proteinGr').innerText = targetMacros.proteinGr || '0';
            document.getElementById('carbGr').innerText = targetMacros.carbGr || '0';
            document.getElementById('fatGr').innerText = targetMacros.fatGr || '0';
        }
        
        // ุชุญููู ุงููุฌุจุงุช 
        if (data.meals) {
            userMeals = data.meals;
        }
    }
}


// =================================================================
// 2. ููุทู ุชุชุจุน ุงููุฌุจุงุช (Project 2) 
// =================================================================
const foodData = [
    // --- ุงูุฃุทุจุงู ุงูุดุนุจูุฉ ุงููุตุฑูุฉ ุงูุฑุฆูุณูุฉ ูุงููุฑุจูููุฏุฑุงุช ---
    { id: 1, name: "ููู ูุฏูุณ (ูุทุจูุฎ)", calories: 104, protein: 7.6, carbs: 17.0, fat: 2.1 },
    { id: 2, name: "ุทุนููุฉ/ููุงูู (ููููุฉ)", calories: 333, protein: 13.3, carbs: 32.7, fat: 17.9 },
    { id: 3, name: "ูุดุฑู (ุฎููุท ุฌุงูุฒ)", calories: 154, protein: 5.6, carbs: 29.5, fat: 1.8 },
    { id: 4, name: "ุฎุจุฒ ุจูุฏู (ุนูุด ุจูุฏู)", calories: 257, protein: 8.5, carbs: 54.0, fat: 1.5 },
    { id: 5, name: "ููุฑููุฉ ุจุดุงููู (ุทุจู ุฌุงูุฒ)", calories: 195, protein: 10.0, carbs: 18.0, fat: 9.0 },
    { id: 6, name: "ุฅูุฏููู (ููุฑููุฉ ุณุฑูุนุฉ ุงูุชุญุถูุฑ)", calories: 430, protein: 8.0, carbs: 56.0, fat: 20.0 }, 
    { id: 7, name: "ูุทูุฑ ูุดูุชุช", calories: 375, protein: 7.0, carbs: 40.0, fat: 21.0 },
    // --- ูุญูู ูุฏูุงุฌู ูุฃุณูุงู ---
    { id: 101, name: "ุตุฏูุฑ ุฏุฌุงุฌ (ูุทุจูุฎุฉ)", calories: 165, protein: 31.0, carbs: 0.0, fat: 3.6 },
    { id: 102, name: "ูุญู ุจูุฑู ูููู ุงูุฏูู (ูุทุจูุฎ)", calories: 250, protein: 26.0, carbs: 0.0, fat: 15.0 },
    { id: 103, name: "ุณูู ุจูุทู (ูุดูู)", calories: 129, protein: 26.0, carbs: 0.0, fat: 2.7 },
    { id: 104, name: "ูุจุฏุฉ ุจุชูู (ูุทุจูุฎุฉ)", calories: 135, protein: 20.4, carbs: 4.0, fat: 3.6 },
    { id: 105, name: "ุจูุถ (ูุณููู)", calories: 155, protein: 13.0, carbs: 1.1, fat: 11.0 },
    { id: 106, name: "ุณูู ูุงูุฑูู (ูุดูู/ูุทุจูุฎ)", calories: 205, protein: 25.0, carbs: 0.0, fat: 13.9 }, 
    { id: 107, name: "ุชููุฉ ูุนูุจุฉ (ูู ุงููุงุก ููุตูุงุฉ)", calories: 109, protein: 25.0, carbs: 0.0, fat: 0.8 }, 
    // --- ุญุจูุจ ููุฑุจูููุฏุฑุงุช (ุดุงุฆุนุฉ) ---
    { id: 201, name: "ุฃุฑุฒ ุฃุจูุถ (ูุทุจูุฎ)", calories: 130, protein: 2.7, carbs: 28.0, fat: 0.3 },
    { id: 202, name: "ุฃุฑุฒ ุจุงูุดุนุฑูุฉ (ูุทุจูุฎ)", calories: 170, protein: 3.5, carbs: 30.0, fat: 4.0 },
    { id: 203, name: "ููุฑููุฉ (ูุทุจูุฎุฉ)", calories: 158, protein: 5.8, carbs: 31.0, fat: 0.9 },
    { id: 204, name: "ุจุทุงุทุณ ูุญูุฑุฉ (ููููุฉ)", calories: 312, protein: 3.8, carbs: 41.0, fat: 15.0 },
    { id: 205, name: "ุดููุงู (ูุฌููุ ุบูุฑ ูุทุจูุฎ)", calories: 389, protein: 16.9, carbs: 66.3, fat: 6.9 },
    { id: 206, name: "ุจุทุงุทุง ุญููุฉ (ูุดููุฉ)", calories: 90, protein: 2.0, carbs: 20.0, fat: 0.1 }, // ๐ฅ๐ฅ ุงูุนูุตุฑ ุงูุฌุฏูุฏ ๐ฅ๐ฅ
    // --- ุงูููุณุฑุงุช ูุงูุจุฐูุฑ ูุงูุฏููู ---
    { id: 301, name: "ุทุญููุฉ ุณุงุฆูุฉ", calories: 595, protein: 25.5, carbs: 25.0, fat: 53.7 },
    { id: 302, name: "ููุฒ ููุฆ", calories: 579, protein: 21.1, carbs: 21.6, fat: 49.9 },
    { id: 303, name: "ุจูุฏู ููุฆ", calories: 628, protein: 15.0, carbs: 16.7, fat: 60.7 },
    { id: 304, name: "ุนูู ุงูุฌูู/ุฌูุฒ", calories: 654, protein: 15.2, carbs: 13.7, fat: 65.2 },
    { id: 307, name: "ููู ุณูุฏุงูู (ููุฆ/ูุญูุต)", calories: 567, protein: 25.8, carbs: 16.1, fat: 49.2 },
    { id: 308, name: "ุฒุจุฏุฉ ููู ุณูุฏุงูู (ุทุจูุนูุฉ)", calories: 588, protein: 25.1, carbs: 20.1, fat: 50.4 },
    { id: 305, name: "ุฒูุช ุฒูุชูู", calories: 884, protein: 0.0, carbs: 0.0, fat: 100.0 }, 
    { id: 306, name: "ุณูู ุจูุฏู", calories: 900, protein: 0.0, carbs: 0.0, fat: 100.0 },
    // --- ุฃูุจุงู ูููุชุฌุงุชูุง ---
    { id: 401, name: "ุฌุจูุฉ ุจูุถุงุก (ููููุฉ ุงูุฏุณู)", calories: 110, protein: 15.0, carbs: 3.0, fat: 4.0 },
    { id: 402, name: "ุฌุจูุฉ ุฑููู", calories: 385, protein: 25.0, carbs: 2.0, fat: 30.0 },
    { id: 403, name: "ูุจู/ุญููุจ ูุงูู ุงูุฏุณู", calories: 61, protein: 3.2, carbs: 4.8, fat: 3.3 },
    { id: 404, name: "ุฒุจุงุฏู (ุทุจูุนู)", calories: 61, protein: 3.5, carbs: 4.7, fat: 3.3 },
    { id: 405, name: "ุฌุจูุฉ ูุฑูุด", calories: 98, protein: 10.3, carbs: 3.4, fat: 4.8 }, 
    // --- ููุงูู ูุฎุถุฑูุงุช ูุณูุทุงุช ---
    { id: 501, name: "ุณูุทุฉ ุฎุถุฑุงุก (ุฃุณุงุณูุฉ)", calories: 20, protein: 1.0, carbs: 4.0, fat: 0.1 },
    { id: 502, name: "ุทูุงุทู", calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2 },
    { id: 503, name: "ุฎูุงุฑ", calories: 15, protein: 0.7, carbs: 3.6, fat: 0.1 },
    { id: 504, name: "ุจุงุฐูุฌุงู (ูููู)", calories: 100, protein: 1.0, carbs: 10.0, fat: 6.5 },
    { id: 505, name: "ููุฒ", calories: 89, protein: 1.1, carbs: 23.0, fat: 0.3 },
    { id: 506, name: "ุจูุญ ุฑุทุจ", calories: 277, protein: 1.8, carbs: 75.0, fat: 0.2 },
    // --- ุณูุฑูุงุช ููุดุฑูุจุงุช ---
    { id: 601, name: "ุนุณู ูุญู ุทุจูุนู", calories: 304, protein: 0.3, carbs: 82.4, fat: 0.0 },
    { id: 602, name: "ุจุณุจูุณุฉ (ุดุฑูุญุฉ)", calories: 350, protein: 5.0, carbs: 55.0, fat: 13.0 },
    { id: 603, name: "ุดุงู (ูุญูู ุจุณูุฑ)", calories: 25, protein: 0.0, carbs: 6.0, fat: 0.0 },
    { id: 604, name: "ุนุตูุฑ ูุตุจ", calories: 70, protein: 0.2, carbs: 18.0, fat: 0.1 }
];


// ุชุญููู ุฎูุงุฑุงุช ุงูุทุนุงู
function loadFoodOptions(data) {
    if (!foodSelect) return; 
    foodSelect.innerHTML = '<option value="">ุงุฎุชุฑ ุทุนุงูุงู</option>';
    data.forEach(food => {
        const option = document.createElement('option');
        option.value = food.id;
        option.textContent = food.name;
        foodSelect.appendChild(option);
    });
}

// ุฏุงูุฉ ุชุฌููุน ุงููุณุชูุนูู ูุชุฌูุจ ุชูุฑุงุฑ ุงูููุฏ
function setupListeners() {
    // ุฅุฒุงูุฉ ุงููุณุชูุนูู ุงูุณุงุจููู ูุชุฌูุจ ุชูุฑุงุฑ ุงูุญุฏุซ ุนูุฏ ูู ุชููู
    searchInput.removeEventListener('input', handleSearchInput);
    
    // ุฑุจุท ูุณุชูุน ุงูุจุญุซ ูุชุญุฏูุซ ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
    searchInput.addEventListener('input', handleSearchInput);
}

function handleSearchInput(e) {
    const searchTerm = e.target.value.toLowerCase();
    const filteredFoods = foodData.filter(food =>
        food.name.toLowerCase().includes(searchTerm)
    );
    loadFoodOptions(filteredFoods);
    
    if (filteredFoods.length > 0) {
         if (foodSelect.value === '' || !foodSelect.querySelector(`option[value="${foodSelect.value}"]`)) {
             foodSelect.value = filteredFoods[0].id;
         }
    } else {
         foodSelect.value = '';
    }
}


/**
 * ุฏุงูุฉ ูุญุณุงุจ ุงููุงูุฑูุฒ ููุฌุจุฉ ูุญุฏุฏุฉ. 
 */
function calculateMacros(food, amount) {
    const factor = amount / 100;
    return {
        calories: Math.round(food.calories * factor), 
        protein: (food.protein * factor),
        carbs: (food.carbs * factor),
        fat: (food.fat * factor)
    };
}

// ุฏุงูุฉ ุฅุถุงูุฉ ุงููุฌุจุฉ 
function handleAddMeal() {
    const foodId = foodSelect.value;
    const amount = parseFloat(foodAmount.value);

    if (!foodId || amount <= 0 || isNaN(amount)) {
        alert('ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุทุนุงู ูุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ (ุจุงูุฌุฑุงู).');
        return;
    }

    const food = foodData.find(f => f.id == foodId);
    if (!food) return;

    const macros = calculateMacros(food, amount);

    const newMeal = {
        id: Date.now(),
        foodName: food.name,
        amount: amount,
        ...macros
    };

    userMeals.push(newMeal);
    renderMeals();
    updateTotals();
    
    // ุญูุธ ุงููุฌุจุงุช ูู ุงูุชุฎุฒูู ุงููุญูู
    saveDataToLocalStorage(); 

    // ูุณุญ ุญูู ุงูุจุญุซ ูุฅุนุงุฏุฉ ุชุญููู ุงููุงุฆูุฉ ุงูุฃุตููุฉ
    foodAmount.value = '100';
    searchInput.value = '';
    loadFoodOptions(foodData); 
}


// ุนุฑุถ ูุงุฆูุฉ ุงููุฌุจุงุช
function renderMeals() {
    if (!mealList) initNutriTrackerElements(); 
    mealList.innerHTML = '';
    userMeals.forEach(meal => {
        const li = document.createElement('li');
        
        li.innerHTML = `
            <span class="meal-details">
                <strong>${meal.foodName}</strong> (${meal.amount}g)
            </span>
            <span class="macros-list">
                <strong>${meal.calories}</strong> ูุงููุฑู | 
                <strong>${meal.protein.toFixed(1)}</strong> ุจุฑูุชูู | 
                <strong>${meal.carbs.toFixed(1)}</strong> ูุฑุจูููุฏุฑุงุช | 
                <strong>${meal.fat.toFixed(1)}</strong> ุฏููู 
            </span>
            <button class="delete-btn" data-id="${meal.id}" onclick="deleteMeal(event)">ุญุฐู</button>
        `;
        
        mealList.appendChild(li);
    });
}


// ุญุฐู ูุฌุจุฉ
function deleteMeal(e) {
    const mealId = parseInt(e.target.dataset.id);
    userMeals = userMeals.filter(meal => meal.id !== mealId);
    renderMeals();
    updateTotals();
    
    // ุญูุธ ุงููุฌุจุงุช ูู ุงูุชุฎุฒูู ุงููุญูู
    saveDataToLocalStorage(); 
}

// ุฏุงูุฉ ุชุตููุฑ ูุญุฐู ุฌููุน ุงููุฌุจุงุช
function clearAllMeals() {
    if (!confirm("ูู ุฃูุช ูุชุฃูุฏ ูู ุฑุบุจุชู ูู ุญุฐู ุฌููุน ุงููุฌุจุงุช ุงูููุถุงูุฉ ููุฐุง ุงููููุ")) {
        return;
    }

    userMeals = []; // ุชุตููุฑ ูุงุฆูุฉ ุงููุฌุจุงุช
    renderMeals();  // ุชุญุฏูุซ ุงูุนุฑุถ
    updateTotals(); // ุชุญุฏูุซ ุฅุฌูุงูู ุงูุณุนุฑุงุช ูุงูุฃูุฏุงู ุงููุชุจููุฉ
    saveDataToLocalStorage(); // ุญูุธ ุงูุชุบููุฑ (ูุงุฆูุฉ ูุงุฑุบุฉ)
    alert("ุชู ุชุตููุฑ ุฌููุน ุงููุฌุจุงุช ุจูุฌุงุญ!");
}


/**
 * ุฏุงูุฉ ุชุญุฏูุซ ุงูุฅุฌูุงููุงุช ูุนุฑุถ ุงููุชุจูู.
 */
function updateTotals() {
    if (!totalCalories) return; 

    const totals = userMeals.reduce((acc, meal) => {
        acc.calories += meal.calories; 
        acc.protein += meal.protein;
        acc.carbs += meal.carbs;
        acc.fat += meal.fat;
        return acc;
    }, { calories: 0, protein: 0, carbs: 0, fat: 0 });

    // ุนุฑุถ ุงูุฅุฌูุงูู ุงููุณุชููู
    totalCalories.textContent = Math.round(totals.calories); 
    totalProtein.textContent = totals.protein.toFixed(1);
    totalCarbs.textContent = totals.carbs.toFixed(1);
    totalFat.textContent = totals.fat.toFixed(1);
    
    // ุนุฑุถ ุงูุฃูุฏุงู ูุงููุชุจูู
    // ุงููุฏู ุงูุญุงูู
    const targetCals = targetMacros.targetCal || 0;
    const targetProt = targetMacros.proteinGr || 0;
    const targetCarbs = targetMacros.carbGr || 0;
    const targetFat = targetMacros.fatGr || 0;

    // ุงููุชุจูู (ูุชุฃูุฏ ุฃูุง ุชูู ุงููููุฉ ุนู ุตูุฑ)
    const remainingCals = Math.max(0, targetCals - totals.calories);
    const remainingProt = Math.max(0, targetProt - totals.protein);
    const remainingCarbs = Math.max(0, targetCarbs - totals.carbs);
    const remainingFat = Math.max(0, targetFat - totals.fat);

    // ุชุญุฏูุซ ุดุงุดุฉ ุงูููุฎุต
    document.getElementById('targetSummaryCal').textContent = targetCals;
    document.getElementById('remainingSummaryCal').textContent = Math.round(remainingCals);
    
    document.getElementById('targetSummaryProtein').textContent = targetProt;
    document.getElementById('remainingSummaryProtein').textContent = remainingProt.toFixed(1);
    
    document.getElementById('targetSummaryCarbs').textContent = targetCarbs;
    document.getElementById('remainingSummaryCarbs').textContent = remainingCarbs.toFixed(1);
    
    document.getElementById('targetSummaryFat').textContent = targetFat;
    document.getElementById('remainingSummaryFat').textContent = remainingFat.toFixed(1);
}

// ุชููุฆุฉ ุงูุชุทุจูู ุนูุฏ ุงูุชุญููู - ูุจุฏุฃ ุจุดุงุดุฉ ุงูุจุฏุงูุฉ
document.addEventListener('DOMContentLoaded', () => {
    // ุชุญููู ุงูุจูุงูุงุช ุงููุญููุธุฉ ุนูุฏ ุจุฏุก ุงูุชุดุบูู
    loadDataFromLocalStorage();
    
    // ุงูุชุฃูุฏ ูู ุฃููุง ูุจุฏุฃ ุจุดุงุดุฉ ุงูุจุฏุงูุฉ
    showScreen('landingScreen'); 
});
</script>    
</body>    
</html>
